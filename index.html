<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="canonical" href="http://bestchai.bitbucket.org/shiviz/">
    <title>ShiViz</title>
    <link href="css/style.css" type="text/css" rel="stylesheet">
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <style type="text/css">
        #vizContainer svg line.hidden-link {
            stroke-width: 1px;
            stroke: url(#gedge);
        }
    </style>
</head>

<body>
    <div class="load">h</div>
    <section class="home">
        <header class="icon">
            <ul class="tabs">
                <li class="active">h</li>
                <li>i</li>
                <li class="disabled">a</li>
            </ul>
            <ul class="links">
                <li><a title="Documentation" href="//bitbucket.org/bestchai/shiviz/wiki/Home">d</a></li>
                <li><a title="Source" href="//bitbucket.org/bestchai/shiviz/src">s</a></li>
            </ul>
            <div id="versionContainer"></div>
        </header>
        <div class="content">
            <h1>ShiViz</h1>
            <h2>
                The <strong>ShiViz</strong> vis&shy;ual&shy;izat&shy;ion engi&shy;ne gene&shy;r&shy;ate&shy;s inter&shy;active comm&shy;uni&shy;ca&shy;tion graphs from dis&shy;tri&shy;but&shy;ed sys&shy;tem exe&shy;cut&shy;ion logs.
            </h2>

            <button class="try">Try out ShiViz</button>

            <h3>What am I looking at?</h3>
            <p>
                In the visualization:
                <ul>
                    <li>
                        Time flows from top to bottom.
                    </li>
                    <li>
                        The left panel shows the log and the middle panel displays a <a href="http://en.wikipedia.org/wiki/Directed_acyclic_graph">DAG</a> of the partially ordered vector timestamps recorded in the input log.
                    </li>
                    <li>
                        A vertical line with a box at the top is a <strong>process timeline</strong>. This represents a single thread of execution (e.g., a process).
                    </li>
                    <li>
                        Circles on a process timeline are <strong>events</strong> that were executed by the process.
                    </li>
                    <li>
                        Diagonal lines connecting two events represent the
                        <a href="http://en.wikipedia.org/wiki/Happened-before">happened-before</a> relation between the events: the higher of the two events happened <i>before</i> the second event.
                    </li>
                    <li>
                        Dashed lines represent transitive communication edges. These only appear when a process is hidden, and two processes that are not hidden communicated indirectly through this process.
                    </li>
                    <li>
                        Larger circles represent merged local events. These have a number inside of them, indicating the number of events that they represent.
                    </li>
                    <li>
                        Radiating lines that fade out represent communication edges to processes that are currently hidden from view.
                    </li>
                    <li>
                        Each process is associated with a unique color. Log entries in the left column have the corresponding process color. By default, the log entries are sorted in the order in which the entries appear in the graph.
                    </li>
                </ul>
            </p>

            <h3>How do I interact with the visualization?</h3>
            <p>
                The visualization supports the following actions:
                <ul>
                    <li>
                        <strong>Hide a process timeline</strong>
                        <br>
                        double-click a process box. To show the process timeline, double-click on the process box in the "hidden processes" panel.
                    </li>
                    <li>
                        <strong>Show event or process name</strong>
                        <br>
                        hover over an event circle or a process box. The corresponding text will appear in the top right corner. For events, the log entry for the event will be highlighted in the left panel.
                    </li>
                    <li>
                        <strong>Expand/collapse non-communicating events</strong>
                        <br>
                        Events that are not incident on any communication edges are merged by ShiViz into larger-looking nodes. These nodes can be expanded/collapsed by holding SHIFT and clicking on them.
                    </li>
                    <li>
                        <strong>Filter by communication to process(es)</strong>
                        <br>
                        hold SHIFT and double-click on a process box. The process box will be marked with a white square. This indicates that the graph is now filtered to show only events at the filtered process and only those processes and their events that communicated with this process. You can filter by more than one process. Undo the filter in the same way -- hold SHIFT and double-click the process box.
                    </li>
                </ul>
            </p>

            <h3 id="helpsectiontitle">How is this tool useful?</h3>
            <p>
                Here are three use-cases that ShiViz helps to support:
                <ul>
                    <li>
                        <strong>Understanding the communication graph.</strong>
                        <br>
                        Quickly scan the graph to identify the presence or absence of certain communication patterns.
                    </li>
                    <li>
                        <strong>Reasoning about ordering in a concurrent or distributed setting</strong>.
                        <br>
                        Visualize concurrency and the happened-before relation to understand if two events occurred concurrently, or if one happened before the other.
                    </li>
                    <li>
                        <strong>Analyzing activity at processes that matter</strong>.
                        <br>
                        Hide processes (and their log lines) for a more focused visualization. Filter by communication to a process to see only those events at other processes that were likely to have influenced the execution of a process you care about.
                    </li>
                </ul>
            </p>

            <h3>What is the input log format to the tool?</h3>

            <p>
                At the moment ShiViz only parses logs in the format generated by <a href="http://bitbucket.org/bestchai/shivector/wiki/Home">ShiVector</a>, in which each log event is a single log line followed by a vector-timestamped line that looks like:
                <pre>localProcessId {"process1" : time1, "process2" : time2, ..., "processN" : timeN}</pre>
            </p>

            <p>
                Here is an example of an event entry that ShiViz expects:
                <pre>24.22.130.14 5/27/2013 10:56:22 AM GET /timeline uid=alice location=kansas<br>alice {"alice":5, "loadBalancer": 4, "eastDC":8, "westDC": 3}</pre>
            </p>

            <h3>How do I generate logs in this format?</h3>

            <p>
                Use <a href="http://bitbucket.org/bestchai/shivector/wiki/Home">ShiVector</a>. ShiVector intercepts network messages and wraps those messages to include a vector timestamp. ShiVector also intercepts logging statements to add the current vector timestamp to each existing logged message.
            </p>
        </div>
    </section>

    <section class="input">
        <table>
            <tr>
                <td class="left">
                    <header class="icon">
                        <ul class="tabs">
                            <li>h</li>
                            <li class="active">i</li>
                            <li class="disabled">a</li>
                        </ul>
                        <ul class="links">
                            <li>
                                <a title="Documentation" href="//bitbucket.org/bestchai/shiviz/wiki/Home">d</a>
                            </li>
                            <li>
                                <a title="Source" href="//bitbucket.org/bestchai/shiviz/src">s</a>
                            </li>
                        </ul>
                    </header>
                    <h3>Options</h3>
                    <div class="option">
                        <label>Multiple execution delimiter: <input class="mono" type="text" id="delimiter"></label>
                    </div>
                    <div class="option">
                        <label>Log parser RegExp: <input class="mono" type="text" id="parser"></label>
                    </div>
                    <div class="option">
                        Sort processes in
                        <select id="ordering">
                            <option value="ascending">ascending</option>
                            <option value="descending" selected>descending</option>
                        </select> order by:
                        <br>
                        <label><input name="host_sort" type="radio" checked value="length"> # events</label>
                        <label><input name="host_sort" type="radio" value="order"> appearance in log</label>
                    </div>
                    <button id="visualize" disabled>Visualize</button>
                </td>
                <td class="right">
                    <div id="examples">
                        Examples:
                        <a class="log-link" href="" data-log="log/facebook.log" data-parser="(?<ip>(\d{1,3}\.){3}\d{1,3}) (?<date>(\d{1,2}/){2}\d{4} (\d{2}:){2}\d{2} (AM|PM)) (?<action>(INFO|GET|POST)) (?<event>.*)\n(?<host>\w*) (?<clock>.*)">Facebook data-center log</a>
                        <a class="log-link" href="" data-log="log/voldemort.log" data-parser="\[(?<date>\d{4}-\d{2}-\d{2} (\d{2}:){2}\d{2},\d{3}) (?<path>\S*)\] (?<priority>(INFO|WARN)) (?<event>.*)\n(?<host>\S*) (?<clock>{.*})">Voldemort log</a>
                        <a class="log-link" href="" data-log="log/simpledb.log">SimpleDB log</a>
                        <a class="log-link" href="" data-log="log/facebook-multiple.log" data-delimiter="^=== (?<trace>.*) ===$" data-parser="(?<ip>(\d{1,3}\.){3}\d{1,3}) (?<date>(\d{1,2}/){2}\d{4} (\d{2}:){2}\d{2} (AM|PM)) (?<action>(INFO|GET|POST)) (?<event>.*)\n(?<host>\w*) (?<clock>.*)">Facebook log with multiple executions</a>
                    </div>
                    <textarea id="input" spellcheck="false"></textarea>
                </td>
            </tr>
        </table>
    </section>

    <section class="visualization">
        <div class="left">
            <div class="bg"></div>
            <header class="icon">
                <ul class="tabs">
                    <li>h</li>
                    <li>i</li>
                    <li class="active">a</li>
                </ul>
                <ul class="links">
                    <li><a title="Documentation" href="//bitbucket.org/bestchai/shiviz/wiki/Home">d</a></li>
                    <li><a title="Source" href="//bitbucket.org/bestchai/shiviz/src">s</a></li>
                </ul>
            </header>
            <table class="log">
                <tr></tr>
            </table>
            <div class="highlight"></div>
        </div>
        <div id="graph">
            <div id="hostBar"></div>
            <div id="vizContainer"></div>
        </div>
        <div id="sidebar">
            <div class="event"></div>
            <table class="fields"></table>
            <div class="hidden"></div>
        </div>
    </section>

    <div id="errorbox" class="error"></div>
    <div id="errorcover" class="error"></div>

    <svg id="defs">
        <defs>
            <linearGradient id="gedge">
                <stop stop-color="#999" offset="0" />
                <stop stop-color="#fff" offset="1" />
            </linearGradient>
        </defs>
    </svg>

    <!-- REPLACED DURING DEPLOYMENT: -->
    <script type="text/javascript" src="js/dev.js"></script>
    <!-- -->

    <script type="text/javascript" src="js/exception.js"></script> 

	<script type="text/javascript" src="js/hostPermutation.js"></script>  
    <script type="text/javascript" src="js/motif.js"></script>  
    <script type="text/javascript" src="js/motifFinder.js"></script>  
    <script type="text/javascript" src="js/visualGraph.js"></script>  
    <script type="text/javascript" src="js/visualNode.js"></script>
    <script type="text/javascript" src="js/visualEdge.js"></script>
    <script type="text/javascript" src="js/node.js"></script>  
    <script type="text/javascript" src="js/graph.js"></script> 
    <script type="text/javascript" src="js/vectorTimestamp.js"></script>
    <script type="text/javascript" src="js/logEvent.js"></script>

    <script type="text/javascript" src="js/parser.js"></script>  
    <script type="text/javascript" src="js/layout.js"></script>    
    <script type="text/javascript" src="js/transform.js"></script> 
    <script type="text/javascript" src="js/regexp.js"></script>

    <script type="text/javascript" src="js/global.js"></script>
    <script type="text/javascript" src="js/view.js"></script>  

    <script type="text/javascript" src="js/shiviz.js"></script>
</body>
</html>